--- origsrc/mimalloc-2.0.7/CMakeLists.txt	2022-11-04 09:06:34.000000000 +0900
+++ src/mimalloc-2.0.7/CMakeLists.txt	2022-12-04 19:16:12.251006600 +0900
@@ -360,7 +360,7 @@ if(MI_BUILD_SHARED)
     install(FILES "$<TARGET_FILE_DIR:mimalloc>/mimalloc-redirect${MIMALLOC_REDIRECT_SUFFIX}.dll" DESTINATION ${mi_install_libdir})
   endif()
 
-  install(TARGETS mimalloc EXPORT mimalloc DESTINATION ${mi_install_libdir} LIBRARY)  
+  install(TARGETS mimalloc EXPORT mimalloc RUNTIME DESTINATION bin ARCHIVE DESTINATION ${mi_install_libdir})  
   install(EXPORT mimalloc DESTINATION ${mi_install_cmakedir})
 endif()
 
--- origsrc/mimalloc-2.0.7/src/os.c	2022-11-04 09:06:34.000000000 +0900
+++ src/mimalloc-2.0.7/src/os.c	2022-12-04 17:55:57.945394100 +0900
@@ -1161,7 +1161,7 @@ static void* mi_os_alloc_huge_os_pagesx(
   return VirtualAlloc(addr, size, flags, PAGE_READWRITE);
 }
 
-#elif defined(MI_OS_USE_MMAP) && (MI_INTPTR_SIZE >= 8) && !defined(__HAIKU__)
+#elif defined(MI_OS_USE_MMAP) && (MI_INTPTR_SIZE >= 8) && !defined(__HAIKU__) && !defined(__CYGWIN__)
 #include <sys/syscall.h>
 #ifndef MPOL_PREFERRED
 #define MPOL_PREFERRED 1
