--- origsrc/libnpupnp-5.0.0/configure.ac	2022-08-12 19:02:05.000000000 +0900
+++ src/libnpupnp-5.0.0/configure.ac	2022-11-23 23:06:52.491601900 +0900
@@ -25,7 +25,7 @@ case "${host_os}" in
     linux*|uclinux*) build_linux=yes;;
     darwin*) build_mac=yes;;
     *freebsd*) build_freebsd=yes;;
-    *mingw*) build_mingw=yes;;
+    *cygwin*|*mingw*) build_mingw=yes;;
     *) AC_MSG_WARN(["OS $host_os is unknown"]);;
 esac
 # Pass the conditionals to automake
--- origsrc/libnpupnp-5.0.0/src/threadutil/ThreadPool.cpp	2022-06-23 18:51:23.000000000 +0900
+++ src/libnpupnp-5.0.0/src/threadutil/ThreadPool.cpp	2022-11-23 23:06:52.511546300 +0900
@@ -258,7 +258,7 @@ static int SetPolicyType(ThreadPoolAttr:
  */
 static int SetPriority(ThreadPool::ThreadPriority priority)
 {
-#if defined(_POSIX_PRIORITY_SCHEDULING) && _POSIX_PRIORITY_SCHEDULING > 0
+#if !defined(__CYGWIN__) && defined(_POSIX_PRIORITY_SCHEDULING) && _POSIX_PRIORITY_SCHEDULING > 0
     int retVal = 0;
     int currentPolicy;
     int minPriority = 0;
--- origsrc/libnpupnp-5.0.0/src/utils/netif.cpp	2022-05-24 14:00:57.000000000 +0900
+++ src/libnpupnp-5.0.0/src/utils/netif.cpp	2022-11-23 23:06:52.514569000 +0900
@@ -46,7 +46,7 @@
 #include <ifaddrs.h>
 #ifdef __linux__
 #include <netpacket/packet.h>
-#else
+#elif !defined(__CYGWIN__)
 #include <net/if_dl.h>
 #endif
 
@@ -566,7 +566,7 @@ Interfaces::Internal::Internal()
             ifit->m->sethwaddr(reinterpret_cast<const char*>(sll->sll_addr), sll->sll_halen);
         }
         break;
-#else
+#elif !defined(__CYGWIN__)
         case AF_LINK:
         {
             auto sdl = reinterpret_cast<struct sockaddr_dl*>(ifa->ifa_addr);
