--- origsrc/libafcgi/Makefile.am	2025-08-08 09:25:29.000000000 +0900
+++ src/libafcgi/Makefile.am	2025-08-08 09:25:30.670638900 +0900
@@ -7,7 +7,7 @@ AM_CFLAGS=$(GLIB_CFLAGS)
 lib_LTLIBRARIES=libafcgi.la
 libafcgi_la_SOURCES=libafcgi.c
 libafcgi_la_LIBADD=$(GLIB_LIBS)
-libafcgi_la_LDFLAGS= -version-info 0:0:0
+libafcgi_la_LDFLAGS= -no-undefined -version-info 0:0:0
 
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = libafcgi.pc
--- origsrc/libafcgi/configure.ac	2025-08-08 09:25:29.000000000 +0900
+++ src/libafcgi/configure.ac	2025-08-08 09:25:30.672645400 +0900
@@ -8,7 +8,7 @@ AC_CONFIG_HEADERS([libafcgi-config.h])
 
 AC_CONFIG_MACRO_DIR([m4])
 
-AM_INIT_AUTOMAKE([-Wall -Werror foreign])
+AM_INIT_AUTOMAKE([-Wall foreign])
 
 # Checks for programs.
 AC_PROG_CC
@@ -24,9 +24,9 @@ PKG_CHECK_MODULES(GLIB, glib-2.0 >= 2.16
 
 # lib ev
 AC_CHECK_HEADERS([ev.h], [], [AC_MSG_ERROR("ev.h not found")])
-AC_CHECK_LIB([ev], [ev_loop], [
+AC_CHECK_LIB([ev], [ev_version_major], [
 	LIBS="-lev ${LIBS}"
-	AC_DEFINE([HAVE_LIBEV], [1], [ev_loop in -lev])
+	AC_DEFINE([HAVE_LIBEV], [1], [ev_version_major in -lev])
 	], [AC_MSG_ERROR("libev not found")])
 
 # Checks for header files.
