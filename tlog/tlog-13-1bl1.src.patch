--- origsrc/tlog-13/Makefile.am	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/Makefile.am	2023-10-30 12:49:23.315787400 +0900
@@ -28,3 +28,6 @@ dist_noinst_DATA = tlog.spec
 clean-local:
 	find '$(top_builddir)' -name '*.gcno' -delete -or -name '*.gcda' -delete
 	-rm -rf clang_output_*
+
+pkgconfigdir = $(libdir)/pkgconfig
+pkgconfig_DATA = $(PACKAGE).pc
--- origsrc/tlog-13/configure.ac	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/configure.ac	2023-10-30 13:11:17.272652400 +0900
@@ -20,7 +20,7 @@
 # Process this file with autoconf to produce a configure script.
 
 AC_PREREQ(2.61)
-AC_INIT([tlog], [12])
+AC_INIT([tlog], [13])
 AM_INIT_AUTOMAKE([1.9 -Wall foreign])
 AM_MAINTAINER_MODE
 AC_CONFIG_HEADER([config.h])
@@ -107,7 +107,7 @@ LIBCURL_CHECK_CONFIG([yes], [7.15.4], ,
                      AC_MSG_ERROR([libcurl not found]))
 
 # Output
-AC_CONFIG_FILES([Makefile
+AC_CONFIG_FILES([tlog.pc Makefile
                  m4/Makefile
                  m4/tlog/Makefile
                  include/Makefile
--- origsrc/tlog-13/include/tlog/misc.h	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/include/tlog/misc.h	2023-10-30 12:49:23.315787400 +0900
@@ -34,6 +34,11 @@
 #include <tlog/errs.h>
 #include <tlog/grc.h>
 
+#if defined(__CYGWIN__)
+#define setresgid(rgid, egid, sgid) (-1)
+#define setresuid(ruid, euid, suid) (-1)
+#endif
+
 /** Tlog version and license information */
 extern const char *tlog_version;
 
--- origsrc/tlog-13/include/tlog/pkt.h	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/include/tlog/pkt.h	2023-10-30 12:49:23.315787400 +0900
@@ -33,6 +33,7 @@
 #include <stdbool.h>
 #include <stdint.h>
 #include <stdlib.h>
+#include <sys/time.h>
 
 /** Packet type */
 enum tlog_pkt_type {
--- origsrc/tlog-13/include/tlog/timestr.h	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/include/tlog/timestr.h	2023-10-30 12:49:23.315787400 +0900
@@ -30,6 +30,7 @@
 
 #include <stdlib.h>
 #include <stdbool.h>
+#include <sys/time.h>
 
 /** The timestamp string parser state */
 struct tlog_timestr_parser {
--- origsrc/tlog-13/lib/tlog/Makefile.am	2023-03-03 04:05:01.000000000 +0900
+++ src/tlog-13/lib/tlog/Makefile.am	2023-10-30 12:49:23.315787400 +0900
@@ -159,3 +159,5 @@ libtlog_la_LIBADD = \
     -lutil \
     -lrt \
     -lm
+
+libtlog_la_LDFLAGS = -no-undefined
--- origsrc/tlog-13/tlog.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/tlog-13/tlog.pc.in	2023-10-30 12:49:23.315787400 +0900
@@ -0,0 +1,11 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: tlog
+Description: Terminal I/O logger
+Version: @VERSION@
+Libs: -L${libdir} -ltlog
+Cflags: -I${includedir}
+Requires.private: json-c libcurl
