--- origsrc/aamath/Makefile	2005-06-23 05:12:18.000000000 +0900
+++ src/aamath/Makefile	2025-08-03 07:59:30.349150600 +0900
@@ -5,7 +5,7 @@ OBJS		= $(CXXFILES:.cc=.o)
 TARGET		= aamath
 CFLAGS		= -Wall -O2 -g -DUSE_READLINE
 LFLAGS		= -g
-LIBS		= -lreadline -ltermcap
+LIBS		= -lreadline
 
 $(TARGET): $(OBJS)
 	$(LD) $(LFLAGS) $(OBJS) -o $@ $(LIBS)
@@ -14,10 +14,10 @@ parser.cc parser.h: parser.y
 	yacc -d parser.y && mv y.tab.c parser.cc && mv y.tab.h parser.h
 
 lexer.cc: lexer.l parser.h
-	lex lexer.l && mv lex.yy.c lexer.cc
+	flex lexer.l && mv lex.yy.c lexer.cc
 
 .cc.o:
-	$(CXX) $(CFLAGS) -c $<
+	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $<
 
 clean:
 	rm -f *.o lexer.cc parser.h parser.cc $(TARGET)
