HOMEPAGE="https://sourceforge.net/projects/${PN}/"
SRC_URI="mirror://sourceforge/${PN}/${P}-source.tar.gz"

CATEGORY="Utils"
SUMMARY="ZX80/81 emulator"
DESCRIPTION="sz81 is a Sinclair ZX80/ZX81 emulator very much based upon the work of Ian
Collier's xz80 and Russell Marks's z81 but employing the highly portable SDL
and including additional functionality and features for desktop computers and
portable devices."

LICENSE="GPL-2.0-or-later"
LICENSE_SPDX="SPDX-License-Identifier: GPL-2.0-or-later"
LICENSE_URI="COPYING"

BUILD_DEPENDENCIES="libSDL-devel"

src_compile()
{
	cd ${B}
	lndirs
	cygmake PREFIX=/usr BINDIR=/usr/bin PACKAGE_DATA_DIR=/usr/share/${PN} LDFLAGS=-Wl,--allow-multiple-definition
}

src_install()
{
	cd ${B}
	dobin ./${PN}.exe

	insinto /usr/share/${PN}
	doins data/*.{bmp,rom}
}
