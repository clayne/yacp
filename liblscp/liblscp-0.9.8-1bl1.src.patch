--- origsrc/liblscp-0.9.8/CMakeLists.txt	2022-12-27 18:17:54.990927800 +0900
+++ src/liblscp-0.9.8/CMakeLists.txt	2023-01-31 13:21:55.316170100 +0900
@@ -6,31 +6,35 @@ project (liblscp
   LANGUAGES C)
 
 set (CONFIG_VERSION ${PROJECT_VERSION})
-execute_process (
-  COMMAND git describe --tags --dirty --abbrev=6
-  WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
-  OUTPUT_VARIABLE GIT_DESCRIBE_OUTPUT
-  RESULT_VARIABLE GIT_DESCRIBE_RESULT
-  OUTPUT_STRIP_TRAILING_WHITESPACE)
-if (GIT_DESCRIBE_RESULT EQUAL 0)
-  set (VERSION "${GIT_DESCRIBE_OUTPUT}")
-  string (REGEX REPLACE "^[^0-9]+" "" VERSION "${VERSION}")
-  string (REGEX REPLACE "^1_"      "" VERSION "${VERSION}")
-  string (REGEX REPLACE "^[_vV]+"  "" VERSION "${VERSION}")
-  string (REGEX REPLACE "-g"   "git." VERSION "${VERSION}")
-  string (REGEX REPLACE "[_|-]"   "." VERSION "${VERSION}")
+if (EXISTS "${CMAME_SOURCE_DIR}/.git")
   execute_process (
-    COMMAND git rev-parse --abbrev-ref HEAD
+    COMMAND git describe --tags --dirty --abbrev=6
     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
-    OUTPUT_VARIABLE GIT_REVPARSE_OUTPUT
-    RESULT_VARIABLE GIT_REVPARSE_RESULT
+    OUTPUT_VARIABLE GIT_DESCRIBE_OUTPUT
+    RESULT_VARIABLE GIT_DESCRIBE_RESULT
     OUTPUT_STRIP_TRAILING_WHITESPACE)
-  if (GIT_REVPARSE_RESULT EQUAL 0 AND NOT GIT_REVPARSE_OUTPUT STREQUAL "master")
-    set (VERSION "${VERSION} [${GIT_REVPARSE_OUTPUT}]")
+  if (GIT_DESCRIBE_RESULT EQUAL 0)
+    set (VERSION "${GIT_DESCRIBE_OUTPUT}")
+    string (REGEX REPLACE "^[^0-9]+" "" VERSION "${VERSION}")
+    string (REGEX REPLACE "^1_"      "" VERSION "${VERSION}")
+    string (REGEX REPLACE "^[_vV]+"  "" VERSION "${VERSION}")
+    string (REGEX REPLACE "-g"   "git." VERSION "${VERSION}")
+    string (REGEX REPLACE "[_|-]"   "." VERSION "${VERSION}")
+    execute_process (
+      COMMAND git rev-parse --abbrev-ref HEAD
+      WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
+      OUTPUT_VARIABLE GIT_REVPARSE_OUTPUT
+      RESULT_VARIABLE GIT_REVPARSE_RESULT
+      OUTPUT_STRIP_TRAILING_WHITESPACE)
+    if (GIT_REVPARSE_RESULT EQUAL 0 AND NOT GIT_REVPARSE_OUTPUT STREQUAL "master")
+      set (VERSION "${VERSION} [${GIT_REVPARSE_OUTPUT}]")
+    endif ()
+  else ()
+    set (VERSION "${PROJECT_VERSION}")
   endif ()
-else ()
+else()
   set (VERSION "${PROJECT_VERSION}")
-endif ()
+endif()
 
 set (PACKAGE_NAME "liblscp")
 set (PACKAGE_VERSION "${VERSION}")
--- origsrc/liblscp-0.9.8/doc/CMakeLists.txt	2022-12-27 18:17:54.990927800 +0900
+++ src/liblscp-0.9.8/doc/CMakeLists.txt	2023-01-31 13:22:27.333160000 +0900
@@ -2,7 +2,7 @@
 
 find_package (Doxygen)
 
-if (DOXYGEN_FOUND)
+if (BUILD_DOC AND DOXYGEN_FOUND)
   set (top_srcdir "${CMAKE_CURRENT_SOURCE_DIR}/..")
   configure_file (liblscp.doxygen.in liblscp.doxygen IMMEDIATE @ONLY)
   add_custom_target (doxygen ALL
--- origsrc/liblscp-0.9.8/src/CMakeLists.txt	2022-12-27 18:17:54.992927800 +0900
+++ src/liblscp-0.9.8/src/CMakeLists.txt	2023-01-31 13:22:54.839819100 +0900
@@ -51,7 +51,6 @@ target_link_libraries (${PROJECT_NAME} P
 
 set_target_properties (${PROJECT_NAME} PROPERTIES
   PUBLIC_HEADER "${PUBLIC_HEADERS}"
-  PREFIX "lib"
   OUTPUT_NAME "lscp"
   VERSION ${SHARED_VERSION_INFO}
   SOVERSION ${SHARED_VERSION_CURRENT})
