--- origsrc/liblscp-0.9.7/CMakeLists.txt	2022-10-03 20:00:00.000000000 +0900
+++ src/liblscp-0.9.7/CMakeLists.txt	2022-11-23 00:16:13.391074700 +0900
@@ -6,28 +6,32 @@ project (liblscp
   LANGUAGES C)
 
 set (CONFIG_VERSION ${PROJECT_VERSION})
-execute_process (
-  COMMAND git describe --tags --dirty --abbrev=6
-  WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
-  OUTPUT_VARIABLE GIT_DESCRIBE_OUTPUT
-  RESULT_VARIABLE GIT_DESCRIBE_RESULT
-  OUTPUT_STRIP_TRAILING_WHITESPACE)
-if (GIT_DESCRIBE_RESULT EQUAL 0)
-  set (VERSION "${GIT_DESCRIBE_OUTPUT}")
-  string (REGEX REPLACE "^[^0-9]+" "" VERSION "${VERSION}")
-  string (REGEX REPLACE "^1_"      "" VERSION "${VERSION}")
-  string (REGEX REPLACE "^[_vV]+"  "" VERSION "${VERSION}")
-  string (REGEX REPLACE "-g"   "git." VERSION "${VERSION}")
-  string (REGEX REPLACE "[_|-]"   "." VERSION "${VERSION}")
+if (EXISTS "${CMAME_SOURCE_DIR}/.git")
   execute_process (
-    COMMAND git rev-parse --abbrev-ref HEAD
+    COMMAND git describe --tags --dirty --abbrev=6
     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
-    OUTPUT_VARIABLE GIT_REVPARSE_OUTPUT
-    RESULT_VARIABLE GIT_REVPARSE_RESULT
+    OUTPUT_VARIABLE GIT_DESCRIBE_OUTPUT
+    RESULT_VARIABLE GIT_DESCRIBE_RESULT
     OUTPUT_STRIP_TRAILING_WHITESPACE)
-  if (GIT_REVPARSE_RESULT EQUAL 0 AND NOT GIT_REVPARSE_OUTPUT STREQUAL "master")
-    set (VERSION "${VERSION} [${GIT_REVPARSE_OUTPUT}]")
-  endif ()
+  if (GIT_DESCRIBE_RESULT EQUAL 0)
+    set (VERSION "${GIT_DESCRIBE_OUTPUT}")
+    string (REGEX REPLACE "^[^0-9]+" "" VERSION "${VERSION}")
+    string (REGEX REPLACE "^1_"      "" VERSION "${VERSION}")
+    string (REGEX REPLACE "^[_vV]+"  "" VERSION "${VERSION}")
+    string (REGEX REPLACE "-g"   "git." VERSION "${VERSION}")
+    string (REGEX REPLACE "[_|-]"   "." VERSION "${VERSION}")
+    execute_process (
+      COMMAND git rev-parse --abbrev-ref HEAD
+      WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
+      OUTPUT_VARIABLE GIT_REVPARSE_OUTPUT
+      RESULT_VARIABLE GIT_REVPARSE_RESULT
+      OUTPUT_STRIP_TRAILING_WHITESPACE)
+    if (GIT_REVPARSE_RESULT EQUAL 0 AND NOT GIT_REVPARSE_OUTPUT STREQUAL "master")
+      set (VERSION "${VERSION} [${GIT_REVPARSE_OUTPUT}]")
+    endif ()
+  else()
+    set (VERSION "${PROJECT_VERSION}")
+  endif()
 else ()
   set (VERSION "${PROJECT_VERSION}")
 endif ()
--- origsrc/liblscp-0.9.7/doc/CMakeLists.txt	2022-10-03 20:00:00.000000000 +0900
+++ src/liblscp-0.9.7/doc/CMakeLists.txt	2022-11-23 00:16:13.411080400 +0900
@@ -2,7 +2,9 @@
 
 find_package (Doxygen)
 
-if (DOXYGEN_FOUND)
+option(ENABLE_DOC "Enable doc" OFF)
+
+if (ENABLE_DOC AND DOXYGEN_FOUND)
   set (top_srcdir "${CMAKE_CURRENT_SOURCE_DIR}/..")
   configure_file (liblscp.doxygen.in liblscp.doxygen IMMEDIATE @ONLY)
   add_custom_target (doxygen ALL
--- origsrc/liblscp-0.9.7/src/CMakeLists.txt	2022-10-03 20:00:00.000000000 +0900
+++ src/liblscp-0.9.7/src/CMakeLists.txt	2022-11-23 09:21:42.494300100 +0900
@@ -17,7 +17,7 @@ configure_file (${CMAKE_SOURCE_DIR}/lscp
 if (EXISTS ${CMAKE_SOURCE_DIR}/lscp.pc)
   file(REMOVE ${CMAKE_SOURCE_DIR}/lscp.pc)
 endif()
-configure_file (lscp.pc.cmake ${CMAKE_CURRENT_BINARY_DIR}/lscp.pc)
+configure_file (lscp.pc.cmake ${CMAKE_CURRENT_BINARY_DIR}/lscp.pc @ONLY)
 
 
 set (PUBLIC_HEADERS
@@ -51,7 +51,6 @@ target_link_libraries (${PROJECT_NAME} P
 
 set_target_properties (${PROJECT_NAME} PROPERTIES
   PUBLIC_HEADER "${PUBLIC_HEADERS}"
-  PREFIX "lib"
   OUTPUT_NAME "lscp"
   VERSION ${SHARED_VERSION_INFO}
   SOVERSION ${SHARED_VERSION_CURRENT})
