--- origsrc/easylzma-0.0.7/CMakeLists.txt	2009-02-25 06:32:36.000000000 +0900
+++ src/easylzma-0.0.7/CMakeLists.txt	2025-08-15 08:31:57.593670600 +0900
@@ -52,3 +52,10 @@ ENDIF (WIN32)
 ADD_SUBDIRECTORY(src)
 ADD_SUBDIRECTORY(elzma)
 ADD_SUBDIRECTORY(test)
+
+set(prefix ${CMAKE_INSTALL_PREFIX})
+set(exec_prefix ${CMAKE_INSTALL_PREFIX})
+set(libdir ${CMAKE_INSTALL_PREFIX}/lib)
+set(includedir ${CMAKE_INSTALL_PREFIX}/include)
+configure_file(${CMAKE_SOURCE_DIR}/easylzma.pc.in ${CMAKE_BINARY_DIR}/easylzma.pc @ONLY)
+install(FILES ${CMAKE_BINARY_DIR}/easylzma.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
--- origsrc/easylzma-0.0.7/easylzma.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/easylzma-0.0.7/easylzma.pc.in	2025-08-15 08:33:07.009258900 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: easylzma
+Description: C library and command line tools for LZMA compression and decompression
+Version: @EASYLZMA_MAJOR@.@EASYLZMA_MINOR@.@EASYLZMA_MICRO@
+Libs: -L${libdir} -leasylzma
+Cflags: -I${includedir}
--- origsrc/easylzma-0.0.7/elzma/CMakeLists.txt	2009-02-25 06:32:36.000000000 +0900
+++ src/easylzma-0.0.7/elzma/CMakeLists.txt	2025-08-15 07:48:12.138666000 +0900
@@ -30,7 +30,7 @@ LINK_DIRECTORIES(
 
 ADD_EXECUTABLE(elzma ${SRCS})
 
-TARGET_LINK_LIBRARIES(elzma easylzma_s)
+TARGET_LINK_LIBRARIES(elzma easylzma)
 
 # make a hard link (or copy on win32) from unelzma to elzma
 GET_TARGET_PROPERTY(binPath elzma LOCATION)
@@ -45,3 +45,5 @@ ADD_CUSTOM_COMMAND(TARGET elzma POST_BUI
       COMMAND ${CMAKE_COMMAND} -E copy_if_different ${binPath} ${binDir}
       COMMAND ${hardLinkCommand} elzma${exeExt} unelzma${exeExt}
       WORKING_DIRECTORY "${binDir}")    
+
+install(TARGETS elzma DESTINATION bin)
--- origsrc/easylzma-0.0.7/src/CMakeLists.txt	2009-02-25 06:32:36.000000000 +0900
+++ src/easylzma-0.0.7/src/CMakeLists.txt	2025-08-15 07:47:57.225863900 +0900
@@ -28,7 +28,6 @@ INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOUR
 # get the built libs into the correct place
 SET(LIBRARY_OUTPUT_PATH ${libDir})
 
-ADD_LIBRARY(easylzma_s STATIC ${SRCS} ${HDRS})
 ADD_LIBRARY(easylzma   SHARED ${SRCS} ${HDRS})
 
 # setup shared library version numbering
@@ -54,6 +53,9 @@ FILE(MAKE_DIRECTORY ${incDir})
 # copy public headers to output directory
 FOREACH (header ${PUB_HDRS})
   # preserve relative pathing		
-  ADD_CUSTOM_COMMAND(TARGET easylzma_s POST_BUILD
+  ADD_CUSTOM_COMMAND(TARGET easylzma POST_BUILD
       COMMAND ${CMAKE_COMMAND} -E copy_if_different ${header} ${incDir})
 ENDFOREACH (header ${PUB_HDRS})
+
+install(FILES ${PUB_HDRS} DESTINATION include/easylzma)
+install(TARGETS easylzma RUNTIME DESTINATION bin ARCHIVE DESTINATION lib)
--- origsrc/easylzma-0.0.7/test/CMakeLists.txt	2009-02-25 06:32:36.000000000 +0900
+++ src/easylzma-0.0.7/test/CMakeLists.txt	2025-08-15 07:51:44.797589600 +0900
@@ -18,8 +18,9 @@ LINK_DIRECTORIES(
 )
 
 ADD_EXECUTABLE(easylzma_test ${SRCS} ${HDRS})
+target_include_directories(easylzma_test PRIVATE ${CMAKE_SOURCE_DIR}/src)
 
-TARGET_LINK_LIBRARIES(easylzma_test easylzma_s)
+TARGET_LINK_LIBRARIES(easylzma_test easylzma)
 
 GET_TARGET_PROPERTY(binPath easylzma_test LOCATION)
 
