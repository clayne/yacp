--- origsrc/libvalkey/CMakeLists.txt	2024-10-10 20:10:26.000000000 +0900
+++ src/libvalkey/CMakeLists.txt	2024-10-10 20:17:13.835656000 +0900
@@ -61,6 +61,7 @@ set_target_properties(valkey PROPERTIES
 
 SET_TARGET_PROPERTIES(valkey
     PROPERTIES WINDOWS_EXPORT_ALL_SYMBOLS TRUE
+    SOVERSION "${LIBVALKEY_SONAME}"
     VERSION "${LIBVALKEY_SONAME}")
 IF(MSVC)
     SET_TARGET_PROPERTIES(valkey
@@ -179,13 +180,14 @@ IF(ENABLE_TLS)
     SET_TARGET_PROPERTIES(valkey_tls
         PROPERTIES
         WINDOWS_EXPORT_ALL_SYMBOLS TRUE
+        SOVERSION "${LIBVALKEY_SONAME}"
         VERSION "${LIBVALKEY_SONAME}")
     IF(MSVC)
         SET_TARGET_PROPERTIES(valkey_tls
             PROPERTIES COMPILE_FLAGS /Z7)
     ENDIF()
     TARGET_LINK_LIBRARIES(valkey_tls PRIVATE OpenSSL::SSL)
-    IF(WIN32)
+    IF(WIN32 OR CYGWIN)
         TARGET_LINK_LIBRARIES(valkey_tls PRIVATE valkey)
     ENDIF()
     CONFIGURE_FILE(valkey_tls.pc.in valkey_tls.pc @ONLY)
