--- origsrc/blurhash-v0.0.1/meson.build	2021-01-20 23:21:00.000000000 +0900
+++ src/blurhash-v0.0.1/meson.build	2022-05-09 22:38:42.278893000 +0900
@@ -2,18 +2,21 @@ project('blurhash', 'cpp',
   version : '0.1',
   default_options : ['warning_level=3', 'cpp_std=c++17'])
 
-lib = static_library('blurhash',
+lib = library('blurhash',
            'blurhash.cpp',
+           version: meson.project_version(),
            install : true)
 
-doctest_dep = dependency('doctest', fallback : ['doctest', 'doctest_dep'])
+if get_option('tests')
+  doctest_dep = dependency('doctest', fallback : ['doctest', 'doctest_dep'])
 
-tests = executable('blurhash-tests',
-           'blurhash.cpp',
-	   cpp_args : '-DDOCTEST_CONFIG_IMPLEMENT_WITH_MAIN',
-	   dependencies: doctest_dep,
-           install : false)
-test('blurhash-tests', tests)
+  tests = executable('blurhash-tests',
+            'blurhash.cpp',
+      cpp_args : '-DDOCTEST_CONFIG_IMPLEMENT_WITH_MAIN',
+      dependencies: doctest_dep,
+            install : false)
+  test('blurhash-tests', tests)
+endif
 
 executable('blurhash2bmp', 'blurhash2bmp.cpp', link_with: lib, install: true)
 executable('blurhash', 'image2blurhash.cpp', link_with: lib, install: true)
--- origsrc/blurhash-v0.0.1/meson_options.txt	1970-01-01 09:00:00.000000000 +0900
+++ src/blurhash-v0.0.1/meson_options.txt	2022-05-09 22:36:50.389620000 +0900
@@ -0,0 +1,2 @@
+option('tests', type : 'boolean', value : false, description : 'Build the tests')
+
