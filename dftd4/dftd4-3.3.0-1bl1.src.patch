--- origsrc/dftd4-3.3.0/test/unit/meson.build	2021-08-06 18:20:09.000000000 +0900
+++ src/dftd4-3.3.0/test/unit/meson.build	2021-08-25 08:26:12.984514600 +0900
@@ -15,19 +15,22 @@
 # along with dftd4.  If not, see <https://www.gnu.org/licenses/>.
 
 # Create mstore as subproject for testing
-mstore_prj = subproject(
-  'mstore',
-  version: '>=0.1',
-  required: not meson.is_subproject(),
-  default_options: [
-    'default_library=static',
-  ],
-)
-# If we do not find mstore and are a subproject, we just skip testing
-if not mstore_prj.found()
-  subdir_done()
+mstore_dep = dependency('mstore', required: false)
+if not mstore_dep.found()
+  mstore_prj = subproject(
+    'mstore',
+    version: '>=0.1',
+    required: not meson.is_subproject(),
+    default_options: [
+      'default_library=static',
+    ],
+  )
+  # If we do not find mstore and are a subproject, we just skip testing
+  if not mstore_prj.found()
+    subdir_done()
+  endif
+  mstore_dep = mstore_prj.get_variable('mstore_dep')
 endif
-mstore_dep = mstore_prj.get_variable('mstore_dep')
 
 tests = [
   'ncoord',
