--- origsrc/rgbds-0.9.4/CMakeLists.txt	2025-07-31 20:41:49.000000000 +0900
+++ src/rgbds-0.9.4/CMakeLists.txt	2025-09-18 07:08:35.548847800 +0900
@@ -73,15 +73,15 @@ endif()
 # the git revision is used but uses the fallback in an archive
 
 find_program(GIT git)
-if(GIT)
+if(GIT AND EXISTS "${PROJECT_SOURCE_DIR}/.git")
   execute_process(COMMAND ${GIT} --git-dir=.git -c safe.directory='*' describe --tags --dirty --always
                   WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
                   OUTPUT_VARIABLE GIT_REV OUTPUT_STRIP_TRAILING_WHITESPACE
                   ERROR_QUIET)
   message(STATUS "RGBDS version: ${GIT_REV}")
-else(GIT)
+else(GIT AND EXISTS "${PROJECT_SOURCE_DIR}/.git")
   message(STATUS "Cannot determine RGBDS version (Git not installed), falling back")
-endif(GIT)
+endif(GIT AND EXISTS "${PROJECT_SOURCE_DIR}/.git")
 
 find_package(PkgConfig)
 if(MSVC OR NOT PKG_CONFIG_FOUND)
--- origsrc/rgbds-0.9.4/include/platform.hpp	2025-07-31 20:41:49.000000000 +0900
+++ src/rgbds-0.9.4/include/platform.hpp	2025-09-18 07:11:58.530067200 +0900
@@ -55,7 +55,7 @@
 #endif
 
 // MingGW and Cygwin need POSIX functions which are not standard C explicitly enabled
-#if defined(__MINGW32__) || defined(__CYGWIN__)
+#if defined(__MINGW32__)
 	#define _POSIX_C_SOURCE 200809L
 #endif
 
