--- origsrc/benchmark-1.5.6/CMakeLists.txt	2021-08-11 23:26:35.000000000 +0900
+++ src/benchmark-1.5.6/CMakeLists.txt	2021-08-31 18:45:17.099373700 +0900
@@ -302,12 +302,18 @@ include_directories(${PROJECT_SOURCE_DIR
 # Build the targets
 add_subdirectory(src)
 
+option(USE_SYSTEM_GTEST "Use system gtest" ON)
+
 if (BENCHMARK_ENABLE_TESTING)
   enable_testing()
   if (BENCHMARK_ENABLE_GTEST_TESTS AND
       NOT (TARGET gtest AND TARGET gtest_main AND
            TARGET gmock AND TARGET gmock_main))
-    include(GoogleTest)
+    if (USE_SYSTEM_GTEST)
+      find_package(gtest)
+    else()
+      include(GoogleTest)
+    endif()
   endif()
   add_subdirectory(test)
 endif()
--- origsrc/benchmark-1.5.6/test/CMakeLists.txt	2021-08-11 23:26:35.000000000 +0900
+++ src/benchmark-1.5.6/test/CMakeLists.txt	2021-08-31 18:50:48.502266100 +0900
@@ -188,7 +188,7 @@ add_test(NAME complexity_benchmark COMMA
 if (BENCHMARK_ENABLE_GTEST_TESTS)
   macro(compile_gtest name)
     add_executable(${name} "${name}.cc")
-    target_link_libraries(${name} benchmark::benchmark
+    target_link_libraries(${name} benchmark::benchmark gtest gmock
         gmock_main ${CMAKE_THREAD_LIBS_INIT})
   endmacro(compile_gtest)
 
