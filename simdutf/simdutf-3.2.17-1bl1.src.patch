--- origsrc/simdutf-3.2.17/CMakeLists.txt	2023-08-10 07:02:49.000000000 +0900
+++ src/simdutf-3.2.17/CMakeLists.txt	2023-09-07 13:45:32.820494600 +0900
@@ -3,7 +3,7 @@ cmake_minimum_required(VERSION 3.15)
 project(simdutf
   DESCRIPTION "Fast Unicode validation, transcoding and processing"
   LANGUAGES CXX
-  VERSION 3.2.7
+  VERSION 3.2.17
 )
 
 include (TestBigEndian)
@@ -142,4 +142,9 @@ if(is_top_project)
   include(CPack)
 endif()
 
-# ----
+set(prefix ${CMAKE_INSTALL_PREFIX})
+set(exec_prefix ${CMAKE_INSTALL_PREFIX})
+set(libdir ${CMAKE_INSTALL_PREFIX}/lib)
+set(includedir ${CMAKE_INSTALL_PREFIX}/include)
+configure_file(${CMAKE_SOURCE_DIR}/simdutf.pc.in ${CMAKE_BINARY_DIR}/simdutf.pc @ONLY)
+install(FILES ${CMAKE_BINARY_DIR}/simdutf.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
--- origsrc/simdutf-3.2.17/simdutf.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/simdutf-3.2.17/simdutf.pc.in	2023-09-07 13:45:55.616186100 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: simdutf
+Description: Unicode validation and transcoding at billions of characters per second
+Version: @PROJECT_VERSION@
+Libs: -L${libdir} -lsimdutf
+Cflags: -I${includedir}
--- origsrc/simdutf-3.2.17/src/CMakeLists.txt	2023-08-10 07:02:49.000000000 +0900
+++ src/simdutf-3.2.17/src/CMakeLists.txt	2023-09-07 12:57:33.423064600 +0900
@@ -3,7 +3,7 @@ target_include_directories(simdutf-inclu
 add_library(simdutf-source INTERFACE)
 target_sources(simdutf-source INTERFACE $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>/simdutf.cpp)
 target_link_libraries(simdutf-source INTERFACE simdutf-include-source)
-add_library(simdutf STATIC simdutf.cpp)
+add_library(simdutf SHARED simdutf.cpp)
 target_include_directories(simdutf PRIVATE $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}> )
 target_include_directories(simdutf PUBLIC "$<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/include>")
 
