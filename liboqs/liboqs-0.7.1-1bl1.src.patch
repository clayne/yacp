--- origsrc/liboqs-0.7.1/CMakeLists.txt	2021-12-17 03:34:53.000000000 +0900
+++ src/liboqs-0.7.1/CMakeLists.txt	2022-05-24 10:34:29.518971000 +0900
@@ -201,3 +201,12 @@ if(NOT ${OQS_BUILD_ONLY_LIB})
             USES_TERMINAL)
     endif()
 endif()
+
+if (CYGWIN)
+  set(prefix ${CMAKE_INSTALL_PREFIX})
+  set(exec_prefix ${CMAKE_INSTALL_PREFIX})
+  set(libdir ${CMAKE_INSTALL_PREFIX}/lib)
+  set(includedir ${CMAKE_INSTALL_PREFIX}/include)
+  configure_file(${CMAKE_SOURCE_DIR}/liboqs.pc.in ${CMAKE_BINARY_DIR}/liboqs.pc @ONLY)
+  install(FILES ${CMAKE_BINARY_DIR}/liboqs.pc DESTINATION ${CMAKE_INSTALL_PREFIX}/lib/pkgconfig)
+endif()
--- origsrc/liboqs-0.7.1/liboqs.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/liboqs-0.7.1/liboqs.pc.in	2022-05-24 10:34:56.343771700 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: liboqs
+Description: C library for prototyping and experimenting with quantum-resistant cryptography
+Version: @OQS_VERSION_TEXT@
+Libs: -L${libdir} -loqs
+Cflags: -I${includedir}
--- origsrc/liboqs-0.7.1/tests/CMakeLists.txt	2021-12-17 03:34:53.000000000 +0900
+++ src/liboqs-0.7.1/tests/CMakeLists.txt	2022-05-24 09:32:50.896940600 +0900
@@ -115,7 +115,7 @@ add_definitions(-DOQS_COMPILE_OPTIONS="[
 # for DLL builds.
 add_custom_target(
     run_tests
-    COMMAND ${CMAKE_COMMAND} -E env OQS_BUILD_DIR=${CMAKE_BINARY_DIR} ${PYTHON3_EXEC} -m pytest --verbose --numprocesses=auto --ignore=scripts/copy_from_upstream/repos
+    COMMAND ${CMAKE_COMMAND} -E env OQS_BUILD_DIR=${CMAKE_BINARY_DIR} ${PYTHON3_EXEC} -m pytest --verbose --ignore=scripts/copy_from_upstream/repos
     WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
     DEPENDS oqs example_kem kat_kem test_kem example_sig kat_sig test_sig test_sig_mem test_kem_mem ${UNIX_TESTS}
     USES_TERMINAL)
