--- origsrc/knot-3.2.9/src/knot/server/server.c	2023-07-27 02:11:44.000000000 +0900
+++ src/knot-3.2.9/src/knot/server/server.c	2023-08-09 20:44:02.608015900 +0900
@@ -192,7 +192,9 @@ static bool enable_pktinfo(int sock, int
 		break;
 	case AF_INET6:
 		level = IPPROTO_IPV6;
+#if defined(IPV6_RECVPKTINFO)
 		option = IPV6_RECVPKTINFO;
+#endif
 		break;
 	default:
 		return false;
--- origsrc/knot-3.2.9/src/libknot/endian.h	2023-07-27 02:11:44.000000000 +0900
+++ src/knot-3.2.9/src/libknot/endian.h	2023-08-09 20:44:02.608015900 +0900
@@ -26,7 +26,7 @@
 #pragma once
 
 #if defined(__linux__) || defined(__gnu_hurd__) || \
-    (defined(__FreeBSD_kernel__) && defined(__GLIBC__))
+    (defined(__FreeBSD_kernel__) && defined(__GLIBC__)) || defined(__CYGWIN__)
 #       include <endian.h>
 #elif defined(__FreeBSD__) || defined(__NetBSD__)
 #       include <sys/endian.h>
--- origsrc/knot-3.2.9/tests/Makefile.am	2023-07-27 02:11:44.000000000 +0900
+++ src/knot-3.2.9/tests/Makefile.am	2023-08-09 20:44:02.608015900 +0900
@@ -239,7 +239,7 @@ knot/test_semantic_check:
 	@chmod +x $(top_builddir)/tests/$@
 endif HAVE_LIBUTILS
 
-libzscanner/test_zscanner: libzscanner/zscanner-tool
+libzscanner/test_zscanner: libzscanner/zscanner-tool$(EXEEXT)
 	@$(edit) < $(top_srcdir)/tests/$@.in > $(top_builddir)/tests/$@
 	@chmod +x $(top_builddir)/tests/$@
 
